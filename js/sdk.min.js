/*!
 * EwseduSdk v0.7.1
 * (c) 2017-2019 Derek Yeung
 * Released under the ISC License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.EwsSdkCompiler=e()}(this,function(){"use strict";function t(t){this.sdk=t}function e(){this.bridge=null,this.awaitBridgeCallback=null,this.app=new i.app(this),this.oauth=new i.oauth(this),this.test=new i.test(this),this.sdkVersion="0.7.1",this.sdkMode="beta",this.events={},console.log("[ewsedu] sdk "+this.sdkVersion+" init.")}var i={base:t,app:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getVersion=function(t,e){return this.sdk.exec("app.get.version",{type:"main"},t,e)},e.prototype.getBuildVersion=function(){return this.sdk.exec("app.get.version",{type:"build"},successCallback,errorCallback)},e.prototype.getTarget=function(t,e){return this.sdk.exec("app.get.target",null,t,e)},e}(t),oauth:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getIdentity=function(t,e,i,o){return void 0===t&&(t="base"),void 0===e&&(e={}),this.sdk.exec("oauth.get.identity",Object.assign({},{scope:t},e),i,o)},e}(t),test:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.exec=function(t,e,i,o){return this.sdk.exec(t,e,i,o)},e}(t)};e.prototype.on=function(t,e){return e&&(this.events[t]=e),this},e.prototype.emit=function(t){for(var e=[],i=arguments.length-1;0<i--;)e[i]=arguments[i+1];var o=this.events[t];return o&&o.apply(this,[].concat(e)),this},e.prototype.bridgeReady=function(t,e){var i=window.EwsBridge||this.bridge;if(!i)return this.waitBridge(t),e&&e(new Error("No bridge instance")),!1;i.runtime?this.ready(i,t):window.EwsBridge.wait?window.EwsBridge.wait(this,t):this.waitBridge(t)},e.prototype.waitBridge=function(t){this.awaitBridgeCallback=t},e.prototype.isAwaiting=function(){return!!this.awaitBridgeCallback},e.prototype.arrive=function(t){this.emit("arrive",t),this.awaitBridgeCallback&&(this.bridge=t,this.bridgeReady(this.awaitBridgeCallback),this.awaitBridgeCallback=null)},e.prototype.ready=function(t,e){this.bridge=t,e&&e(this,this.bridge.runtime)},e.prototype.exec=function(t,e,i,o){return this.bridge.exec(t,e,i,o)},e.prototype.canIuse=function(){return!0},e.prototype.canIuseCmd=function(t){return this.exec("bridge.api.canIuse",{cmd:t})};var o=new e,n=!1;if(window.EwsSdk){var r=window.EwsSdk.sdkVersion;o.sdkVersion<r&&(n=!0)}n||(console.log("mounted EwseduSdk"),window.EwsSdk=window.EwseduSdk=o,window.onEwsSdkReady&&window.onEwsSdkReady(o));return{}});